<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.json">
  <!-- ios support -->
  <link rel="apple-touch-icon" href="images/icons/icon-72x72.png">
  <link rel="apple-touch-icon" href="images/icons/icon-96x96.png">
  <link rel="apple-touch-icon" href="images/icons/icon-128x128.png">
  <link rel="apple-touch-icon" href="images/icons/icon-144x144.png">
  <link rel="apple-touch-icon" href="images/icons/icon-152x152.png">
  <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
  <link rel="apple-touch-icon" href="images/icons/icon-384x384.png">
  <link rel="apple-touch-icon" href="images/icons/icon-512x512.png">
  <meta name="apple-mobile-web-app-status-bar" content="#db4938">
  <meta name="theme-color" content="#db4938">
  <title>Dev'Coffee PWA</title>
</head>

<body>
  <main>
    <h1>Dateneingabe</h1>
    <form id="eingabe" action="#" onsubmit="saveData();return false">
      <input type="text" id="desc" placeholder="Beschreibung" />
      <input type="date" id="date" />
      <input type="text" id="cat" placeholder="Kategorie" />
      <input type="number" id="value" />
      <input type="submit" value="Submit Form" />

    </form>
    <h1>Datenausgabe</h1>
    <h2>test5</h2>
    <button type="button" onclick="loadDataFromStorage()">Load Data from Storage</button>
    <script>
      const form = document.getElementById('eingabe')
      //form.addEventListener('button', saveData)

      function saveData() {
        const desc = document.getElementById('desc').value
        const date = document.getElementById('date').value
        const cat = document.getElementById('cat').value
        const number = document.getElementById('value').value
        // console.log(desc)
        const test = false

        try {
          const dataFromStorage = JSON.parse(window.localStorage.getItem('dataInStorage'))
          // Test wihtout localStorage
          // let dataLoad = [
          //   ['ToDoSoemthing','2021-11-11','Work', 900],
          //   ['adsfd','2021-12-11','Work', 800]
          // ];
          dataFromStorage.push([desc, date, cat, number])
          console.table(dataFromStorage)
          window.localStorage.setItem('dataInStorage', JSON.stringify(dataFromStorage))
          test = true

        } catch (e) {
          console.log(e)

        }

        if (!test) {
          const dataLoad = [
            [desc,date,cat,number]
          ]
          dataLoad.push([desc,date,cat,number])
          console.log("hat geklappt")
          console.table(dataLoad)
          window.localStorage.setItem('dataInStorage', JSON.stringify(dataLoad))
        }

      }

      function loadDataFromStorage() {
        try {
          const loadedData = JSON.parse(window.localStorage.getItem('dataInStorage'));
          console.table(loadedData);
        } catch (e) {
          console.log(e);
        }

      }
    </script>
    <div class="container"></div>
  </main>
  <script src="js/app.js"></script>
</body>

</html>
